(function($){function gamipress_progress_map_update_horizontal_center(){$('.gamipress-progress-map-horizontal.gamipress-progress-map-center').each(function(){var $this=$(this);var bar=$this.find('.gamipress-progress-map-bar');var completed_bar=$this.find('.gamipress-progress-map-completed-bar');var max_even_height=0;$this.find('.gamipress-progress-map-item:even').each(function(){$(this).css({height:'auto'});if($(this).outerHeight(!0)>max_even_height){max_even_height=$(this).outerHeight(!0)}});$this.find('.gamipress-progress-map-item:even').css({height:max_even_height+'px'});bar.css({top:max_even_height+'px'});completed_bar.css({top:max_even_height+'px'});var max_odd_height=0;$this.find('.gamipress-progress-map-item:odd').each(function(){$(this).css({top:max_even_height+'px'});if($(this).outerHeight(!0)>max_odd_height){max_odd_height=$(this).outerHeight(!0)}});$this.css({height:(max_even_height+max_odd_height+20)+'px'})})}
function gamipress_progress_map_update_horizontal_completion_bars(){$('.gamipress-progress-map-horizontal:not(.no-recalculate)').each(function(){var $this=$(this);var bar=$this.find('.gamipress-progress-map-bar');var completed_bar=$this.find('.gamipress-progress-map-completed-bar');var last_completed=$this.find('.gamipress-progress-map-completed').last();bar.css({width:$this[0].scrollWidth+'px'});if(last_completed.length){var next=last_completed.next('.gamipress-progress-map-item.gamipress-progress-map-incompleted');if(next.length){completed_bar.css({width:((next.offset().left-$this.offset().left)+40)+'px'})}else{completed_bar.css({width:$this[0].scrollWidth+'px'});$this.addClass('no-recalculate')}}else{completed_bar.css({width:'0px'});$this.addClass('no-recalculate')}})}
function gamipress_progress_map_update_vertical_completion_bars(){$('.gamipress-progress-map-vertical:not(.no-recalculate)').each(function(){var $this=$(this);var completed_bar=$this.find('.gamipress-progress-map-completed-bar');var last_completed=$this.find('.gamipress-progress-map-completed').last();if(last_completed.length){var next=last_completed.next('.gamipress-progress-map-item.gamipress-progress-map-incompleted');if(next.length){completed_bar.css({height:((next.offset().top-$this.offset().top)+40)+'px'})}else{completed_bar.css({height:'100%'});$this.addClass('no-recalculate')}}else{completed_bar.css({height:'0px'});$this.addClass('no-recalculate')}})}
gamipress_progress_map_update_horizontal_completion_bars();gamipress_progress_map_update_vertical_completion_bars();if($('.gamipress-progress-map-horizontal.gamipress-progress-map-center').length){gamipress_progress_map_update_horizontal_center();setInterval(gamipress_progress_map_update_horizontal_center,100)}
if($('.gamipress-progress-map-vertical:not(.no-recalculate)').length){setInterval(gamipress_progress_map_update_vertical_completion_bars,100)}})(jQuery)