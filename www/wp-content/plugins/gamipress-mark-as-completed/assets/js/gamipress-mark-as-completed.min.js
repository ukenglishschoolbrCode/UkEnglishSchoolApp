(function($){$('body').on('change','.gamipress-mark-as-completed-checkbox',function(e){if(!$(this).prop('checked')){e.preventDefault();$(this).prop('checked',!0);return!1}
$(this).closest('li').addClass('user-has-earned');gamipress_mark_as_completed_ajax($(this),$(this).data('id'))});$('body').on('click','.gamipress-mark-as-completed-button',function(e){var disabled=$(this).data('disabled');if(disabled===undefined){disabled=!1}
if(typeof disabled=='string'){disabled=(disabled==='true')}
if(disabled){e.preventDefault();return!1}
$(this).data('disabled','true');$(this).text($(this).data('text-completed'));$(this).closest('li').addClass('user-has-earned');gamipress_mark_as_completed_ajax($(this),$(this).data('id'))});function gamipress_mark_as_completed_ajax(element,post_id){$.ajax({url:gamipress_mark_as_completed.ajaxurl,method:'POST',data:{action:'gamipress_mark_as_completed',nonce:gamipress_mark_as_completed.nonce,post_id:post_id,},success:function(response){element.trigger('gamipress_mark_as_completed_success');if(response.data.parent_completed){if(element.closest('.single-achievement').length){element.closest('.single-achievement').addClass('user-has-earned');element.closest('.user-has-not-earned[class*="post"]').removeClass('user-has-not-earned').addClass('user-has-earned')}else if(element.closest('.gamipress-achievement.user-has-not-earned').length){element.closest('.gamipress-achievement.user-has-not-earned').removeClass('user-has-not-earned').addClass('user-has-earned')}else if(element.closest('.single-rank').length){element.closest('.single-rank').addClass('user-has-earned');element.closest('.user-has-not-earned[class*="post"]').removeClass('user-has-not-earned').addClass('user-has-earned')}else if(element.closest('.gamipress-rank.user-has-not-earned').length){element.closest('.gamipress-rank.user-has-not-earned').removeClass('user-has-not-earned').addClass('user-has-earned')}
element.trigger('gamipress_mark_as_completed_parent_completed')}}})}})(jQuery)